{% extends "base.html" %}
{% block title %}Etiquetas{% endblock %}

{% block content %}
<div class="mb-3 d-flex justify-content-between align-items-center">
  <h2 class="mb-0">Etiquetas</h2>
  {% if user.is_authenticated %}
    <a href="{% url 'crear_etiqueta' %}" class="btn btn-dark btn-sm">Crear etiqueta</a>
  {% endif %}
</div>

{# Mostrar todas las etiquetas como botones #}
{% if etiquetas %}
  <div class="d-flex flex-wrap gap-2 mb-4">
    {% for tag in etiquetas %}
      <a href="{% url 'lista_etiquetas' %}?etiqueta={{ tag.nombre }}" class="badge bg-secondary text-decoration-none">#{{ tag.nombre }}</a>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-secondary">No hay etiquetas.</div>
{% endif %}

{# Mostrar lugares filtrados por la etiqueta seleccionada #}
{% if request.GET.etiqueta %}
  <h5>Lugares con la etiqueta "{{ request.GET.etiqueta }}"</h5>
  {% if lugares %}
    <ul class="list-group mb-3">
      {% for lugar in lugares %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <a href="{% url 'detalle_lugar' lugar.pk %}">{{ lugar.nombre }}</a>
          <small class="text-muted">{{ lugar.comuna }}</small>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted small">No hay lugares para esta etiqueta.</p>
  {% endif %}
{% endif %}
{% endblock %}
