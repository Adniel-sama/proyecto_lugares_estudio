{% extends "base.html" %}
{% block title %}{{ lugar.nombre }}{% endblock %}

{% block content %}
<div class="mb-3">
  <h2>{{ lugar.nombre }}</h2>
  <p class="text-muted mb-1">{{ lugar.tipo|capfirst }} — {{ lugar.comuna }}</p>
  {% if lugar.direccion %}<p class="mb-1">{{ lugar.direccion }}</p>{% endif %}
  <p class="mb-1 small">
    {% if lugar.horario_apertura and lugar.horario_cierre %}
      Horario: {{ lugar.horario_apertura }} — {{ lugar.horario_cierre }}
    {% endif %}
    {% if lugar.wifi %} • Wi-Fi disponible{% endif %}
{% if lugar.imagen_url %}
    <div class="text-center mb-3">
        <img src="{{ lugar.imagen_url }}" alt="{{ lugar.nombre }}" class="img-thumbnail d-block" style="max-width: 300px; height: auto;">
    </div>
{% endif %}

    {% if lugar.descripcion %}
        <p>{{ lugar.descripcion }}</p>
    {% endif %}
  </p>

  <div class="mt-3 d-flex gap-2">
    {% if user.is_authenticated %}
      <a href="{% url 'crear_resena' %}?lugar={{ lugar.pk }}" class="btn btn-dark btn-sm">Agregar reseña</a>
    {% endif %}
    {% if user == lugar.agregado_por %}
    <a href="{% url 'editar_lugar' lugar.pk %}" class="btn btn-outline-dark btn-sm">Editar</a>
    <a href="{% url 'eliminar_lugar' lugar.pk %}" class="btn btn-outline-danger btn-sm">Eliminar</a>
    {% endif %}
  </div>
</div>

<hr>

<h5>Etiquetas</h5>
{% if lugar.etiquetas.all %}
  <p>
    {% for tag in lugar.etiquetas.all %}
      <span class="badge bg-secondary">#{{ tag.nombre }}</span>
    {% endfor %}
  </p>
{% else %}
  <p class="text-muted small">Sin etiquetas.</p>
{% endif %}

<hr>

<h5>Reseñas</h5>
{% include "resenas/_lista_pequena.html" with resenas=lugar.resenas.all %}
<hr>
<a href="{% url 'lista_lugares' %}" class="btn btn-outline-secondary btn-sm">Volver</a>
{% endblock %}

